{# templates/includes/_scripts.html - 完全本地版 #}

<!-- Bootstrap Bundle JS（本地，必须包含 Popper） -->
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

<!-- 初始化所有 Dropdown（保证点击、键盘、移动端正常工作） -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const dropdownElementList = document.querySelectorAll('.dropdown-toggle');
    dropdownElementList.forEach(function (el) {
        new bootstrap.Dropdown(el);
    });
});
</script>


<!-- 您的其他自定义脚本 -->
<script src="{{ url_for('static', filename='js/common.js') }}"></script>
<script src="{{ url_for('static', filename='js/person_edit.js') }}"></script>
<script src="{{ url_for('static', filename='js/buildings.js') }}"></script>

{# 如有其他 js，继续添加 #}


{% if current_user.is_authenticated %}
<!-- 水印脚本只加载一次，且放在 DOM 就绪后执行 -->
<script src="{{ url_for('static', filename='js/water.js') }}" defer></script>
{% endif %}
